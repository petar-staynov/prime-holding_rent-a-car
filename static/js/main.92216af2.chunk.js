(this["webpackJsonpprime-holding_rent-a-car"]=this["webpackJsonpprime-holding_rent-a-car"]||[]).push([[0],{54:function(e,t,c){},55:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c(1),r=c.n(n),s=c(28),l=c.n(s),i=(c(54),c(55),c(70)),j=c(72),o=c(9),b=function(e){return Object(a.jsxs)(i.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(i.a.Brand,{as:o.c,to:"/",children:"RaC"}),Object(a.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(i.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(j.a,{className:"mr-auto",children:[Object(a.jsx)(j.a.Link,{as:o.c,to:"/",children:"Home"}),Object(a.jsx)(j.a.Link,{as:o.c,to:"/vehicles",children:"Vehicles"}),Object(a.jsx)(j.a.Link,{as:o.c,to:"/customers",children:"Customers"}),Object(a.jsx)(j.a.Link,{as:o.c,to:"/rent",children:"Rent a car"}),Object(a.jsx)(j.a.Link,{as:o.c,to:"/rents",children:"Rental events"})]})})]})},d=function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"text-center",children:"Rent a car"}),Object(a.jsx)("p",{children:"This is a simple web app built using React (Hooks), Bootstrap and Firebase Firestore (DB) and Firebase Storage (Image storage)"}),Object(a.jsx)("h6",{children:"Functionality:"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"[Customers] Read feature"}),Object(a.jsx)("li",{children:"[Customers] Create feature"}),Object(a.jsx)("li",{children:"[Customers] Edit feature"}),Object(a.jsx)("li",{children:"[Customers] Delete feature"}),Object(a.jsx)("li",{children:"[Vehicles] Read feature (list, browse)"}),Object(a.jsx)("li",{children:"[Vehicles] Create feature"}),Object(a.jsx)("li",{children:"[Vehicles] Update feature"}),Object(a.jsx)("li",{children:"[Vehicles] Delete feature"}),Object(a.jsx)("li",{children:"Rent a car feature - update number of available vehicles"}),Object(a.jsx)("li",{children:"Rent a car feature - rental period discounts"}),Object(a.jsx)("li",{children:"[Rental Events] Read feature (list, browse)"})]})]})},u=c(11),h=c(5),O=c(35);c(67),c(61);O.a.initializeApp({apiKey:"AIzaSyDYt3OF7irKx1Va069tX7KX7waHE_UIhqQ",authDomain:"rent-a-car-78289.firebaseapp.com",databaseURL:"https://rent-a-car-78289.firebaseio.com",projectId:"rent-a-car-78289",storageBucket:"rent-a-car-78289.appspot.com",messagingSenderId:"798115532448",appId:"1:798115532448:web:fe1400a7383e407ac8c3c5"});var x=O.a.storage(),m=O.a.firestore(),p=c(15),v={petrol:"Petrol",diesel:"Diesel",hybrid:"Hybrid",electric:"Electric"},f=function(e){var t=e.picture,c=e.css,n=""===t?"".concat("/prime-holding_rent-a-car","/img/600x800.png"):t;return Object(a.jsx)("img",{src:n,className:"img-fluid",style:c})},g=function(e){return new Date(e.toDate()).getFullYear()},y=function(e){return new Date(e.toDate())},N=function(e){return y(e).toISOString().substring(0,10)},C=function(e){return e.toISOString().substring(0,10)},w=function(e,t){var c=y(e),a=y(t).getTime()-c.getTime();return Math.ceil(a/864e5)},L=function(e){var t=m.collection("vehicles"),c=Object(u.e)(),n=Object(p.a)(t,{idField:"id"}),r=Object(h.a)(n,1)[0],s=function(e){var t=e.vehicleObj,n=t.id,r=t.brand,s=t.model,l=t.year,i=t.type,j=t.fuelType,o=t.price,b=t.seatsNumber,d=t.picture,u=t.count;return Object(a.jsxs)("tr",{onClick:function(){c.push("/vehicles/view/".concat(n))},style:{cursor:"pointer"},children:[Object(a.jsx)("td",{children:Object(a.jsx)(f,{picture:d,css:{maxHeight:"4rem"}})}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:s}),Object(a.jsx)("td",{children:g(l)}),Object(a.jsx)("td",{children:i}),Object(a.jsx)("td",{children:v[j]}),Object(a.jsx)("td",{children:b}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:u})]})};return r?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"text-center",children:"Vehicles"}),Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:function(){c.push("/vehicles/add")},children:"Add new vehicle"})}),Object(a.jsx)("hr",{}),Object(a.jsxs)("table",{className:"table table-responsive-md",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Photo"}),Object(a.jsx)("th",{scope:"col",children:"Brand"}),Object(a.jsx)("th",{scope:"col",children:"Model"}),Object(a.jsx)("th",{scope:"col",children:"Year"}),Object(a.jsx)("th",{scope:"col",children:"Type"}),Object(a.jsx)("th",{scope:"col",children:"Fuel"}),Object(a.jsx)("th",{scope:"col",children:"Seats"}),Object(a.jsx)("th",{scope:"col",children:"$/day"}),Object(a.jsx)("th",{scope:"col",children:"Count"})]})}),Object(a.jsx)("tbody",{children:r.map((function(e,t){return Object(a.jsx)(s,{vehicleObj:e},t)}))})]})]}):Object(a.jsx)("h1",{className:"text-center",children:"LOADING..."})},E=c(71),D=c(69),S={economy:"Economy",estate:"Estate",luxury:"Luxury",suv:"SUV",cargo:"Cargo"},k="2030-12-31",P=c(48),R=Object(P.a)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),q=R.actions,I=(q.increment,q.decrement,q.incrementByAmount,R.reducer,c(27)),T=function e(t,c,a,n,r){Object(I.a)(this,e),this.startDate=t,this.endDate=c,this.customerId=a,this.vehicleId=n,this.rentPrice=r},A=function(e){var t=Object(n.useState)(""),c=Object(h.a)(t,2),r=c[0],s=c[1],l=Object(n.useState)(""),i=Object(h.a)(l,2),j=i[0],o=i[1],b=Object(n.useState)(""),d=Object(h.a)(b,2),O=d[0],x=d[1],v=Object(n.useState)(""),f=Object(h.a)(v,2),y=f[0],N=f[1],w=Object(n.useState)(0),L=Object(h.a)(w,2),S=L[0],P=L[1],R=Object(n.useState)(0),q=Object(h.a)(R,2),I=q[0],A=q[1],F=Object(u.e)(),V=m.collection("customers"),B=m.collection("vehicles"),M=m.collection("rents"),H=Object(p.a)(V,{idField:"id"}),U=Object(h.a)(H,1)[0],Y=Object(p.a)(B,{idField:"id"}),z=Object(h.a)(Y,1)[0];Object(n.useEffect)((function(){z&&s(z[0]),U&&o(U[0])}),[z,U]),Object(n.useEffect)((function(){if(O&&y){var e=function(e,t){var c=new Date(e),a=new Date(t).getTime()-c.getTime();return Math.ceil(a/864e5)}(O,y),t=e*r.price;e>=10?(t-=.1*t,A(10)):e>=7?(t-=.07*t,A(7)):e>=3?(t-=.03*t,A(3)):A(0),P(t)}}),[O,y]);return U&&z?0===U.length||0===z.length?Object(a.jsx)("h1",{className:"text-center",children:"Not enough customers or vehicles available."}):U.length>0&&z.length>0?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"text-center",children:"Rent a car"}),Object(a.jsxs)(E.a,{onSubmit:function(e){if(e.preventDefault(),s)if(j)if(O)if(y)if(S<=0)alert("You need to rent the vehicle for at least one day");else{r.count<=0&&alert("This vehicle isn't available. Please select another one!");var t=new T(new Date(O),new Date(y),j.id,r.id,S);M.add(Object.assign({},t)).then((function(e){console.log("Rent event created!"),console.log(r.id),B.doc(r.id).update({count:r.count-1}).then((function(){F.push("/rents")}))})).catch((function(e){alert("Error"),console.log(e)}))}else alert("Please select an end date");else alert("Please select a start date");else alert("Please select a customer");else alert("Please select a vehicle")},children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col col-auto",children:[Object(a.jsx)("p",{children:"Select a customer:"}),Object(a.jsx)(E.a.Control,{as:"select",required:!0,value:j,onChange:function(e){return o(e.target.value)},children:U.map((function(e,t){return Object(a.jsx)("option",{value:e,children:e.name},t)}))})]}),Object(a.jsxs)("div",{className:"col col-auto",children:[Object(a.jsx)("p",{children:"Select a vehicle:"}),Object(a.jsx)(E.a.Control,{as:"select",required:!0,value:r,onChange:function(e){return s(e.target.value)},children:z.map((function(e,t){return Object(a.jsxs)("option",{value:e,children:[e.brand," ",e.model," ",g(e.year)," - ",e.count]},t)}))})]}),Object(a.jsxs)("div",{className:"col col-auto",children:[Object(a.jsx)("p",{children:"Start Date:"}),Object(a.jsx)(E.a.Control,{type:"date",required:!0,value:O,max:k,onChange:function(e){return x(e.target.value)}})]}),Object(a.jsxs)("div",{className:"col col-auto",children:[Object(a.jsx)("p",{children:"End Date:"}),Object(a.jsx)(E.a.Control,{type:"date",min:C(O?new Date(O):new Date(Date.now())),max:k,required:!0,value:y,onChange:function(e){return N(e.target.value)}})]}),Object(a.jsxs)("div",{className:"col col-auto",children:[Object(a.jsx)("p",{children:"Price"}),Object(a.jsx)("span",{children:S})]})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsxs)("p",{children:["Discount: ",I,"%"]}),Object(a.jsx)("br",{}),Object(a.jsx)(D.a,{variant:"primary",type:"submit",children:"Rent"})]})]})]}):void 0:Object(a.jsx)("h1",{className:"text-center",children:"LOADING..."})},F=function(e){var t=m.collection("customers"),c=Object(u.e)(),n=Object(p.a)(t,{idField:"id"}),r=Object(h.a)(n,1)[0],s=function(e){var t=e.customerObj,n=t.id,r=t.name,s=t.email,l=t.phone;return Object(a.jsxs)("tr",{onClick:function(){c.push("/customers/view/".concat(n))},style:{cursor:"pointer"},children:[Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:s}),Object(a.jsx)("td",{children:l})]})};return r?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"text-center",children:"Customers"}),Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:function(){c.push("/customers/add")},children:"Add new customer"})}),Object(a.jsx)("hr",{}),Object(a.jsxs)("table",{className:"table table-responsive-md",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Name"}),Object(a.jsx)("th",{scope:"col",children:"Email"}),Object(a.jsx)("th",{scope:"col",children:"Phone"})]})}),Object(a.jsx)("tbody",{children:r.map((function(e,t){return Object(a.jsx)(s,{customerObj:e},t)}))})]})]}):Object(a.jsx)("h1",{className:"text-center",children:"LOADING..."})},V=c(12),B=c.n(V),M=c(16),H={jpg:"image/jpeg"},U=function e(t,c,a,n,r,s,l,i,j){Object(I.a)(this,e),this.brand=t,this.model=c,this.year=a,this.type=n,this.fuelType=r,this.seats=s,this.price=l,this.count=i,this.picture=j},Y=function(e){var t=Object(n.useState)(""),c=Object(h.a)(t,2),r=c[0],s=c[1],l=Object(n.useState)(""),i=Object(h.a)(l,2),j=i[0],o=i[1],b=Object(n.useState)(""),d=Object(h.a)(b,2),O=d[0],p=d[1],f=Object(n.useState)("economy"),g=Object(h.a)(f,2),y=g[0],N=g[1],C=Object(n.useState)("petrol"),w=Object(h.a)(C,2),L=w[0],k=w[1],P=Object(n.useState)("0"),R=Object(h.a)(P,2),q=R[0],I=R[1],T=Object(n.useState)("0"),A=Object(h.a)(T,2),F=A[0],V=A[1],Y=Object(n.useState)("0"),z=Object(h.a)(Y,2),_=z[0],$=z[1],G=Object(n.useState)(null),K=Object(h.a)(G,2),J=K[0],W=K[1],X=Object(u.e)(),Z=m.collection("vehicles"),Q=function(){var e=Object(M.a)(B.a.mark((function e(t){var c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(e){if(console.log(e),e){var t=new U(r,j,new Date(O),y,L,q,F,_,e);Z.add(Object.assign({},t)).then((function(e){X.push("/vehicles")})).catch((function(e){alert("Error"),console.log(e)}))}else alert("Invalid image")},t.preventDefault(),r){e.next=5;break}return alert("Please type a brand"),e.abrupt("return");case 5:if(j){e.next=8;break}return alert("Please type a model"),e.abrupt("return");case 8:if(O){e.next=11;break}return alert("Please enter a valid year"),e.abrupt("return");case 11:if(y){e.next=14;break}return alert("Please select a vehicle type"),e.abrupt("return");case 14:if(L){e.next=17;break}return alert("Please select a fuel type"),e.abrupt("return");case 17:if(q){e.next=20;break}return alert("Please enter a valid number of seats"),e.abrupt("return");case 20:if(F){e.next=23;break}return alert("Please enter a valid price"),e.abrupt("return");case 23:if(_){e.next=26;break}return alert("Please enter a valid amount of available vehicles"),e.abrupt("return");case 26:return e.next=28,x.ref(J.name).put(J).on("state_changed",(function(e){}),(function(e){alert("ERROR"),console.log(e)}),Object(M.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.ref().child(J.name).getDownloadURL();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h1",{children:"ADD VEHICLE"}),Object(a.jsxs)(E.a,{onSubmit:Q,children:[Object(a.jsx)(E.a.Label,{children:"Brand"}),Object(a.jsx)(E.a.Control,{type:"text",name:"brand",placeholder:"Brand...",required:!0,value:r,onChange:function(e){return s(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Model"}),Object(a.jsx)(E.a.Control,{type:"text",placeholder:"Model...",required:!0,value:j,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Year"}),Object(a.jsx)(E.a.Control,{type:"date",placeholder:"Construction year...",min:"1980-01-01",required:!0,value:O,onChange:function(e){return p(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Type"}),Object(a.jsx)(E.a.Control,{as:"select",required:!0,value:y,onChange:function(e){return N(e.target.value)},children:Object.entries(S).map((function(e){var t=Object(h.a)(e,2),c=t[0],n=t[1];return Object(a.jsx)("option",{value:c,children:n},c)}))}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Fuel type"}),Object(a.jsx)(E.a.Control,{as:"select",required:!0,value:L,onChange:function(e){return k(e.target.value)},children:Object.entries(v).map((function(e){var t=Object(h.a)(e,2),c=t[0],n=t[1];return Object(a.jsx)("option",{value:c,children:n},c)}))}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Number of seats"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Number of seats...",min:1,max:7,required:!0,value:q,onChange:function(e){return I(Number(e.target.value))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Rent price"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Rent price...",min:1,required:!0,value:F,onChange:function(e){return V(Number(e.target.value))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Available vehicles"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Available vehicles...",min:1,required:!0,value:_,onChange:function(e){return $(Number(e.target.value))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Image"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"file",required:!0,onChange:function(e){var t=e.target.files[0];t&&Object.values(H).includes(t.type)?W(t):(W(null),alert("Invalid image"))}}),Object(a.jsx)("hr",{}),Object(a.jsx)(D.a,{variant:"primary",type:"submit",children:"Submit"})]})]})},z=c(10),_=function(e){var t=e.match.params.id,c=Object(n.useState)(null),r=Object(h.a)(c,2),s=r[0],l=r[1],i=Object(n.useState)(null),j=Object(h.a)(i,2),o=j[0],b=j[1],d=Object(u.e)(),O=m.collection("vehicles");Object(n.useEffect)((function(){O.doc(t).get().then((function(e){l(e.data())}))}),[]);var p=function(){var e=Object(M.a)(B.a.mark((function e(c){var a,n,r,l,i,j,b,u,h;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),a=s.brand,n=s.model,r=s.year,l=s.type,i=s.fuelType,j=s.seats,b=s.price,u=s.count,h=function(e){e||(e=s.picture);var c=new U(a,n,r,l,i,j,b,u,e);O.doc(t).update(Object.assign({},c)).then((function(){console.log("Document successfully updated!"),d.push("/vehicles/view/".concat(t))})).catch((function(e){alert("Error"),console.log(e)}))},a||alert("Please type a brand"),n||alert("Please type a model"),r||alert("Please enter a valid year"),l||alert("Please select a vehicle type"),i||alert("Please select a fuel type"),j||alert("Please enter a valid number of seats"),b||alert("Please enter a valid price"),u||alert("Please enter a valid amount of available vehicles"),!o){e.next=15;break}return e.next=14,x.ref(o.name).put(o).on("state_changed",(function(e){}),(function(e){alert("ERROR"),console.log(e)}),Object(M.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.ref().child(o.name).getDownloadURL();case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)}))));case 14:return e.abrupt("return");case 15:h();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(s){var g=s.brand,y=s.model,C=s.year,w=s.type,L=s.fuelType,k=s.price,P=s.seats,R=(s.picture,s.count);return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h1",{children:"EDIT VEHICLE"}),Object(a.jsx)(f,{picture:s.picture,css:{maxHeight:"24rem"}}),Object(a.jsxs)(E.a,{onSubmit:p,children:[Object(a.jsx)(E.a.Label,{children:"Brand"}),Object(a.jsx)(E.a.Control,{type:"text",name:"brand",placeholder:"Brand...",required:!0,value:g,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{brand:e.target.value}))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Model"}),Object(a.jsx)(E.a.Control,{type:"text",placeholder:"Model...",required:!0,value:y,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{model:e.target.value}))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Year"}),Object(a.jsx)(E.a.Control,{type:"date",placeholder:"Construction year...",min:"1980-01-01",required:!0,value:N(C),onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{year:e.target.value}))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Type"}),Object(a.jsx)(E.a.Control,{as:"select",required:!0,value:w,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{type:e.target.value}))},children:Object.entries(S).map((function(e){var t=Object(h.a)(e,2),c=t[0],n=t[1];return Object(a.jsx)("option",{value:c,children:n},c)}))}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Fuel type"}),Object(a.jsx)(E.a.Control,{as:"select",required:!0,value:L,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{fuelType:e.target.value}))},children:Object.entries(v).map((function(e){var t=Object(h.a)(e,2),c=t[0],n=t[1];return Object(a.jsx)("option",{value:c,children:n},c)}))}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Number of seats"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Number of seats...",min:1,max:7,required:!0,value:P,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{seats:Number(e.target.value)}))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Rent price"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Rent price...",min:1,required:!0,value:k,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{price:e.target.value}))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Available vehicles"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Available vehicles...",min:1,required:!0,value:R,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{count:e.target.value}))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"New image"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&Object.values(H).includes(t.type)?b(t):(b(null),alert("Invalid image"))}}),Object(a.jsx)("hr",{}),Object(a.jsx)(D.a,{variant:"success",type:"submit",children:"Submit"})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-primary mr-1",onClick:function(){d.push("/vehicles/view/".concat(t))},children:"View"}),Object(a.jsx)("button",{type:"button",className:"btn btn-danger mr-1",onClick:function(){d.push("/vehicles/delete/".concat(t))},children:"Delete"})]})}),Object(a.jsx)("br",{})]})}return Object(a.jsx)("div",{className:"text-center",children:"Loading..."})},$=function(e){var t=e.match.params.id,c=Object(n.useState)(null),r=Object(h.a)(c,2),s=r[0],l=r[1],i=Object(u.e)(),j=m.collection("vehicles");Object(n.useEffect)((function(){j.doc(t).get().then((function(e){l(e.data())}))}),[]);var o=function(){var e=Object(M.a)(B.a.mark((function e(c){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,j.doc(t).delete().then((function(){alert("Vehicle deleted!"),i.push("/vehicles")})).catch((function(e){alert("Error"),console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(s){var b=s.brand,d=s.model,O=s.year,x=s.type,p=s.fuelType,g=s.price,y=s.seats,C=(s.picture,s.count);return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h1",{children:"DELETE VEHICLE"}),Object(a.jsx)(f,{picture:s.picture,css:{maxHeight:"24rem"}}),Object(a.jsxs)(E.a,{onSubmit:o,children:[Object(a.jsx)(E.a.Label,{children:"Brand"}),Object(a.jsx)(E.a.Control,{type:"text",name:"brand",placeholder:"Brand...",disabled:!0,value:b}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Model"}),Object(a.jsx)(E.a.Control,{type:"text",placeholder:"Model...",disabled:!0,value:d}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Year"}),Object(a.jsx)(E.a.Control,{type:"date",placeholder:"Construction year...",disabled:!0,value:N(O)}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Type"}),Object(a.jsx)(E.a.Control,{as:"select",required:!0,disabled:!0,value:x,children:Object(a.jsx)("option",{value:S[x],children:S[x]},x)}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Fuel type"}),Object(a.jsx)(E.a.Control,{as:"select",required:!0,disabled:!0,value:p,children:Object(a.jsx)("option",{value:v[p],children:v[p]},p)}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Number of seats"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Number of seats...",disabled:!0,value:y}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Rent price"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Rent price...",disabled:!0,value:g}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Available vehicles"}),Object(a.jsx)(E.a.Control,{type:"number",placeholder:"Available vehicles...",disabled:!0,value:C}),Object(a.jsx)("br",{}),Object(a.jsx)(D.a,{variant:"danger",size:"lg",type:"submit",children:"Delete"})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-primary mr-1",onClick:function(){i.push("/vehicles/view/".concat(t))},children:"View"}),Object(a.jsx)("button",{type:"button",className:"btn btn-warning mr-1",onClick:function(){i.push("/vehicles/edit/".concat(t))},children:"Edit"})]})}),Object(a.jsx)("br",{})]})}return Object(a.jsx)("div",{className:"text-center",children:"Loading..."})},G=function(e){var t=e.match.params.id,c=Object(n.useState)(null),r=Object(h.a)(c,2),s=r[0],l=r[1],i=Object(u.e)(),j=m.collection("vehicles");Object(n.useEffect)((function(){j.doc(t).get().then((function(e){l(e.data())}))}),[]);if(s){s.id;var o=s.brand,b=s.model,d=s.year,O=s.type,x=s.fuelType,p=s.price,y=s.seats,N=s.picture,C=s.count;return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(f,{picture:N,css:{maxHeight:"24rem"}})})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Brand:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:o})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Model:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:b})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Year:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:g(d)})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Type:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:O})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Fuel:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:v[x]})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Seats:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:y})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Rent price:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsxs)("h2",{children:["$",p," / day"]})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Vehicles available:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:C})})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-warning mr-1",onClick:function(){i.push("/vehicles/edit/".concat(t))},children:"Edit"}),Object(a.jsx)("button",{type:"button",className:"btn btn-danger mr-1",onClick:function(){i.push("/vehicles/delete/".concat(t))},children:"Delete"})]})})]})}return Object(a.jsx)("div",{className:"text-center",children:"Loading..."})},K=function e(t,c,a){Object(I.a)(this,e),this.name=t,this.email=c,this.phone=a},J=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/gm,W=/^(\+?)[\d]+$/gm,X=function(e){var t=Object(n.useState)(""),c=Object(h.a)(t,2),r=c[0],s=c[1],l=Object(n.useState)(""),i=Object(h.a)(l,2),j=i[0],o=i[1],b=Object(n.useState)(""),d=Object(h.a)(b,2),O=d[0],x=d[1],p=Object(u.e)(),v=m.collection("customers");return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h1",{children:"Add Customer"}),Object(a.jsxs)(E.a,{onSubmit:function(e){e.preventDefault();var t=new RegExp(J),c=new RegExp(W);if(r)if(j&&t.test(j))if(O&&c.test(O)){var a=new K(r,j,O);v.add(Object.assign({},a)).then((function(e){p.push("/customers")})).catch((function(e){alert("Error"),console.log(e)}))}else alert("Please type a valid phone number of at least 10 digits");else alert("Please type a valid email");else alert("Please type a valid name")},children:[Object(a.jsx)(E.a.Label,{children:"Name"}),Object(a.jsx)(E.a.Control,{type:"text",name:"brand",placeholder:"Name...",required:!0,value:r,onChange:function(e){return s(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Email"}),Object(a.jsx)(E.a.Control,{type:"email",placeholder:"Email...",required:!0,value:j,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Phone"}),Object(a.jsx)(E.a.Control,{type:"tel",placeholder:"Phone number...",minLength:10,maxLength:20,required:!0,value:O,onChange:function(e){return x(e.target.value)}}),Object(a.jsx)("hr",{}),Object(a.jsx)(D.a,{variant:"primary",type:"submit",children:"Submit"})]})]})},Z=function(e){var t=e.match.params.id,c=Object(n.useState)(null),r=Object(h.a)(c,2),s=r[0],l=r[1],i=Object(u.e)(),j=m.collection("customers");Object(n.useEffect)((function(){j.doc(t).get().then((function(e){l(e.data())}))}),[]);if(s){var o=s.name,b=s.email,d=s.phone;return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Name:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:o})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Email:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:b})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6 text-right",children:Object(a.jsx)("h2",{children:"Phone number:"})}),Object(a.jsx)("div",{className:"col-6 text-left",children:Object(a.jsx)("h2",{children:d})})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-warning mr-1",onClick:function(){i.push("/customers/edit/".concat(t))},children:"Edit"}),Object(a.jsx)("button",{type:"button",className:"btn btn-danger mr-1",onClick:function(){i.push("/customers/delete/".concat(t))},children:"Delete"})]})})]})}return Object(a.jsx)("div",{className:"text-center",children:"Loading..."})},Q=function(e){var t=e.match.params.id,c=Object(n.useState)(null),r=Object(h.a)(c,2),s=r[0],l=r[1],i=Object(u.e)(),j=m.collection("customers");Object(n.useEffect)((function(){j.doc(t).get().then((function(e){l(e.data())}))}),[]);var o=function(){var e=Object(M.a)(B.a.mark((function e(c){var a,n,r,l,o,b;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),a=s.name,n=s.email,r=s.phone,l=new RegExp(J),o=new RegExp(W),a){e.next=7;break}return alert("Please type a valid name"),e.abrupt("return");case 7:if(n&&l.test(n)){e.next=10;break}return alert("Please type a valid email"),e.abrupt("return");case 10:if(r&&o.test(r)){e.next=13;break}return alert("Please type a valid phone number of at least 10 digits"),e.abrupt("return");case 13:b=new K(a,n,r),j.doc(t).update(Object.assign({},b)).then((function(e){console.log("Document successfully updated!"),i.push("/customers/view/".concat(t))})).catch((function(e){alert("Error"),console.log(e)}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(s){var b=s.name,d=s.email,O=s.phone;return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h1",{children:"EDIT CUSTOMER"}),Object(a.jsxs)(E.a,{onSubmit:o,children:[Object(a.jsx)(E.a.Label,{children:"Name"}),Object(a.jsx)(E.a.Control,{type:"text",name:"brand",placeholder:"Name...",required:!0,value:b,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{name:e.target.value}))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Email"}),Object(a.jsx)(E.a.Control,{type:"email",placeholder:"Email...",required:!0,value:d,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{email:e.target.value}))}}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Phone"}),Object(a.jsx)(E.a.Control,{type:"string",placeholder:"Phone number...",minLength:10,maxLength:20,required:!0,value:O,onChange:function(e){return l(Object(z.a)(Object(z.a)({},s),{},{phone:e.target.value}))}}),Object(a.jsx)("hr",{}),Object(a.jsx)(D.a,{variant:"success",type:"submit",children:"Submit"})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-primary mr-1",onClick:function(){i.push("/customers/view/".concat(t))},children:"View"}),Object(a.jsx)("button",{type:"button",className:"btn btn-danger mr-1",onClick:function(){i.push("/customers/delete/".concat(t))},children:"Delete"})]})}),Object(a.jsx)("br",{})]})}return Object(a.jsx)("div",{className:"text-center",children:"Loading..."})},ee=function(e){var t=e.match.params.id,c=Object(n.useState)(null),r=Object(h.a)(c,2),s=r[0],l=r[1],i=Object(u.e)(),j=m.collection("customers");Object(n.useEffect)((function(){j.doc(t).get().then((function(e){l(e.data())}))}),[]);var o=function(){var e=Object(M.a)(B.a.mark((function e(c){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,j.doc(t).delete().then((function(){alert("Customer deleted!"),i.push("/customers")})).catch((function(e){alert("Error"),console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(s){var b=s.name,d=s.email,O=s.phone;return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h1",{children:"DELETE CUSTOMER"}),Object(a.jsxs)(E.a,{onSubmit:o,children:[Object(a.jsx)(E.a.Label,{children:"Name"}),Object(a.jsx)(E.a.Control,{type:"text",name:"brand",placeholder:"Name...",disabled:!0,value:b}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Email"}),Object(a.jsx)(E.a.Control,{type:"email",placeholder:"Email...",disabled:!0,value:d,pattern:J}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a.Label,{children:"Phone"}),Object(a.jsx)(E.a.Control,{type:"tel",placeholder:"Phone number...",disabled:!0,value:O}),Object(a.jsx)("hr",{}),Object(a.jsx)(D.a,{variant:"danger",size:"lg",type:"submit",children:"Delete"})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-primary mr-1",onClick:function(){i.push("/customers/view/".concat(t))},children:"View"}),Object(a.jsx)("button",{type:"button",className:"btn btn-warning mr-1",onClick:function(){i.push("/customers/delete/".concat(t))},children:"Edit"})]})}),Object(a.jsx)("br",{})]})}return Object(a.jsx)("div",{className:"text-center",children:"Loading..."})},te=function(e){var t=m.collection("rents"),c=m.collection("vehicles"),n=m.collection("customers"),r=Object(p.a)(t,{idField:"id"}),s=Object(h.a)(r,1)[0],l=Object(p.a)(c,{idField:"id"}),i=(Object(h.a)(l,1)[0],Object(p.a)(n,{idField:"id"})),j=(Object(h.a)(i,1)[0],function(e){var t=e.rentObj,c=t.startDate,n=t.endDate,r=t.customerId,s=t.vehicleId,l=t.rentPrice;return Object(a.jsxs)("tr",{style:{cursor:"pointer"},children:[Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:s}),Object(a.jsx)("td",{children:N(c)}),Object(a.jsx)("td",{children:N(n)}),Object(a.jsx)("td",{children:w(c,n)}),Object(a.jsx)("td",{children:l})]})});return s?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"text-center",children:"Rents:"}),Object(a.jsx)("hr",{}),Object(a.jsxs)("table",{className:"table table-responsive-md",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Customer"}),Object(a.jsx)("th",{scope:"col",children:"Vehicle"}),Object(a.jsx)("th",{scope:"col",children:"Start Date"}),Object(a.jsx)("th",{scope:"col",children:"End Date"}),Object(a.jsx)("th",{scope:"col",children:"Days"}),Object(a.jsx)("th",{scope:"col",children:"Price"})]})}),Object(a.jsx)("tbody",{children:s.map((function(e,t){return Object(a.jsx)(j,{rentObj:e},t)}))})]})]}):Object(a.jsx)("h1",{className:"text-center",children:"LOADING..."})};var ce=function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(o.b,{basename:"/",children:Object(a.jsx)(b,{})}),Object(a.jsxs)(o.b,{basename:"/",children:[Object(a.jsx)(u.a,{exact:!0,path:"/",component:d}),Object(a.jsx)(u.a,{exact:!0,path:"/vehicles",component:L}),Object(a.jsx)(u.a,{exact:!0,path:"/vehicles/add",component:Y}),Object(a.jsx)(u.a,{exact:!0,path:"/vehicles/edit/:id",component:_}),Object(a.jsx)(u.a,{exact:!0,path:"/vehicles/delete/:id",component:$}),Object(a.jsx)(u.a,{exact:!0,path:"/vehicles/view/:id",component:G}),Object(a.jsx)(u.a,{exact:!0,path:"/customers",component:F}),Object(a.jsx)(u.a,{exact:!0,path:"/customers/add",component:X}),Object(a.jsx)(u.a,{exact:!0,path:"/customers/view/:id",component:Z}),Object(a.jsx)(u.a,{exact:!0,path:"/customers/edit/:id",component:Q}),Object(a.jsx)(u.a,{exact:!0,path:"/customers/delete/:id",component:ee}),Object(a.jsx)(u.a,{exact:!0,path:"/rent",component:A}),Object(a.jsx)(u.a,{exact:!0,path:"/rents",component:te})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=document.getElementById("root"),ne=Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(o.a,{children:Object(a.jsx)(ce,{})})});l.a.render(ne,ae),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[66,1,2]]]);
//# sourceMappingURL=main.92216af2.chunk.js.map